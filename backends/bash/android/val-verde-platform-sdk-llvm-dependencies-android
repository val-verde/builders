#!/bin/bash

set -e

# Source package build helper functions
source /usr/libexec/${VAL_VERDE_GH_TEAM}-platform-sdk-builder-api

# android autoconf build
package-invoke-builder autoconf-cross 2

# android automake build
package-invoke-builder automake-cross 1

# android autoconf-archive build
package-invoke-builder autoconf-archive-cross 2021

# android argp-standalone build
package-invoke-builder argp-standalone-cross 1

# android musl obstack build
package-invoke-builder musl-obstack 1

# android libxcrypt build
package-invoke-builder libxcrypt-cross 4

# android zlib build
package-invoke-builder zlib-cross 1

# android bzip2 build
package-invoke-builder bzip2-cross 1

# android lz4 build
package-invoke-builder lz4-cross 1

# android xxhash build
package-invoke-builder xxhash-cross 0

# android zip build
package-invoke-builder zip-cross 30

# android zstd build
package-invoke-builder zstd-cross 0

# android unzip build
package-invoke-builder unzip-cross 60

# android help2man build
package-invoke-builder help2man-cross 1

# android gperf build
package-invoke-builder gperf-cross 3

# android libtool build
package-invoke-builder libtool-cross 2

# libatomic-ops build
package-invoke-builder libatomic-ops-cross 7

# android libffi build
package-invoke-builder libffi-cross 3

# android libiconv build
package-invoke-builder libiconv-cross 1

# android icu build
package-invoke-builder icu4c-cross 68

# android libunistring build
package-invoke-builder libunistring-cross 0

# android gc build
package-invoke-builder gc-cross 8

# android gmp build
package-invoke-builder gmp-cross 6

# android ncurses build
package-invoke-builder ncurses-cross 6

# android gettext build (without libxml2 and xz)
FORTIFY_SOURCE_LEVEL=0 \
DEB_PATH=${TOOLCHAIN_DEB_PATH} \
package-invoke-builder gettext-cross 0 bootstrap-only

# android gzip build
package-invoke-builder gzip-cross 1

# android xz build
package-invoke-builder xz-cross 5

# android libxml2 build
DEB_PATH=${TOOLCHAIN_DEB_PATH} \
package-invoke-builder libxml2-cross 2 bootstrap-only

# android gettext build
FORTIFY_SOURCE_LEVEL=0 \
package-invoke-builder gettext-cross 0

# android texinfo build
# package-invoke-builder texinfo-cross 6

# guile build
package-invoke-builder guile-cross 3

# android make build
package-invoke-builder make-cross 4

# android m4 build
# package-invoke-builder m4-cross 1

# android ninja build
if [ "${HOST_OS_API_LEVEL}" -ge "28" ]; then
    package-invoke-builder ninja-cross 1
fi

# android file build
package-invoke-builder file-cross 5

# android libedit build
package-invoke-builder libedit-cross 20210714-3

# android pcre build
package-invoke-builder pcre-cross 8

# android mpfr build
package-invoke-builder mpfr-cross 4

# android mpc build
package-invoke-builder mpc-cross 1

# android isl build
package-invoke-builder isl-cross 0

# android libev build
package-invoke-builder libev-cross 4

# android gdbm build
package-invoke-builder gdbm-cross 1

# android libdb build
package-invoke-builder libdb-cross 5

# android tcl build
package-invoke-builder tcl-cross 8

# android sqlite build
package-invoke-builder sqlite-cross 3

# android openssl build
package-invoke-builder openssl-cross 1

# android libcap build
package-invoke-builder libcap-cross 2

# android krb5 build
package-invoke-builder krb5-cross 1

# android expat build
package-invoke-builder expat-cross 2

# android gawk build
package-invoke-builder gawk-cross 5

# autogen build
package-invoke-builder autogen-cross 5

# android libgpg-error build
package-invoke-builder libgpg-error-cross 1

# android libgcrypt build
package-invoke-builder libgcrypt-cross 1

# android indent build
package-invoke-builder indent-cross 2

# android util-linux build
DEB_PATH=${TOOLCHAIN_DEB_PATH} \
package-invoke-builder util-linux-cross 2 bootstrap-only

# android attr build
package-invoke-builder attr-cross 2

# android acl build
package-invoke-builder acl-cross 2

# android libarchive build
package-invoke-builder libarchive-cross 3

# android libssh build
package-invoke-builder libssh-cross 0

# android libssh2 build
package-invoke-builder libssh2-cross 1

# android curl build
package-invoke-builder curl-cross 7

# android apple-mig build
package-invoke-builder apple-mig-cross 121

# alsa-lib build
package-invoke-builder alsa-lib-cross 1

# android libuv build
package-invoke-builder libuv-cross 1

# android ldns build
package-invoke-builder ldns-cross 1

# android c-ares build
package-invoke-builder c-ares-cross 1

# android openssh-portable build
package-invoke-builder openssh-portable-cross 8

# android bash build
package-invoke-builder bash-cross 5

# android grep build
package-invoke-builder grep-cross 3

# android sed build
package-invoke-builder sed-cross 4

# android bison build
package-invoke-builder bison-cross 3

# android flex build
# package-invoke-builder flex-cross 2

# android jq build
package-invoke-builder jq-cross 1

# android json-c build
package-invoke-builder json-c-cross 0

# android tar build
if [ "${HOST_OS_API_LEVEL}" -ge "28" ]; then
    package-invoke-builder tar-cross 1
fi

# android coreutils build
package-invoke-builder coreutils-cross 8

# android which build
package-invoke-builder which-cross 2

# android findutils build
package-invoke-builder findutils-cross 4

# android less build
package-invoke-builder less-cross 590

# android dpkg build
package-invoke-builder dpkg-cross 1

# android rsync build
package-invoke-builder rsync-cross 3

# android lua build
package-invoke-builder lua-cross 5

# android wget build
package-invoke-builder wget-cross 1

# android python build
ENABLE_STAGE_ROOT_BUILD=TRUE \
_PYTHON_HOST_PLATFORM=${HOST_OS}-${HOST_PROCESSOR} \
package-invoke-builder python-cross 3

# libxml2 build (with python support)
package-invoke-builder libxml2-cross 2

# android libxslt build
package-invoke-builder libxslt-cross 1

# android python sdk build
package-invoke-category-builder python-sdk-cross

# android libtasn1 build
package-invoke-builder libtasn1-cross 4

# android p11-kit build
DISABLE_SYSTEMD=TRUE \
package-invoke-builder p11-kit-cross 0

# android dbus build
package-invoke-builder dbus-cross 1

# android util-linux build (with python support)
DISABLE_SYSTEMD=TRUE \
package-invoke-builder util-linux-cross 2

# android nettle build
package-invoke-builder nettle-cross 3

# android unbound build
package-invoke-builder unbound-cross 1

# android gnutls build
package-invoke-builder gnutls-cross 3

# android libmicrohttpd build
package-invoke-builder libmicrohttpd-cross 0

# android elfutils build
package-invoke-builder elfutils-cross 0

# android strace build
if [ "${HOST_OS_API_LEVEL}" -ge "28" ]; then
    package-invoke-builder strace-cross 5
else
    COMMON_CFLAGS="\
        -Dfputs_unlocked=fputs \
        ${COMMON_CFLAGS} \
    " \
    package-invoke-builder strace-cross 5
fi

# android glib build
package-invoke-builder glib-cross 1

# android gobject-introspection build
# package-invoke-builder gobject-introspection-cross 1

# android libsecret build
package-invoke-builder libsecret-cross 0

# android pkg-config build
package-invoke-builder pkg-config-cross 0

# android graphics server build
package-invoke-category-builder graphics-server-cross

# android itstool build
package-invoke-builder itstool-cross 2

# android gtk-doc build
package-invoke-builder gtk-doc-cross 1

# android graphviz build
package-invoke-builder graphviz-cross 2

# android cups build
package-invoke-builder cups-cross 2

# android apt build
package-invoke-builder apt-cross 2

# android popt build
package-invoke-builder popt-cross 1

# android rpm build
package-invoke-builder rpm-cross 4

# android dnf build
# package-invoke-builder dnf-cross 2

# android swig build
package-invoke-builder swig-cross 4

# android openjdk build
package-invoke-builder openjdk-cross 17

# openjdk jansi build
package-invoke-builder jansi-cross 2

# android maven build
package-invoke-builder maven-cross 3

# android z3 build
package-invoke-builder z3-cross 4

# android git build
package-invoke-builder git-cross 2

# android vim build
package-invoke-builder vim-cross 8

# android cmake build
package-invoke-builder cmake-cross 3

# android protobuf build
package-invoke-builder protobuf-cross 3

# android boost build
package-invoke-builder boost-cross 1

# android cereal build
package-invoke-builder cereal-cross 1

# android libobjc2 build
package-invoke-builder libobjc2-cross 2

# android patch elf
package-invoke-builder android-patch-elf-cross 1

# android jwasm (ml64) cross compiler build
package-invoke-builder jwasm 2

# android re2c build
package-invoke-builder re2c-cross 2

# android alive2 build
package-invoke-builder alive2-cross 1

# android hiredis build
package-invoke-builder hiredis-cross 1

# android ccache build
package-invoke-builder ccache-cross 4

# android distcc build
package-invoke-builder distcc-cross 3
